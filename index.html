<!DOCTYPE html>
<html lang="en" ng-app="IdleLands">
  <head>
    <title>Idle Lands</title>
    <link href="./css/lib.css" rel="stylesheet">
    <link href="./css/index.css" rel="stylesheet">
    <link href="./favicon.ico" rel="shortcut icon" type="image/x-icon"><script>if(window.location.host === 'idlelands.github.io') window.location = 'http://webfe.idle.land'</script>
  </head>
  <body ng-controller="Head">
    <base href="/">
    <md-toolbar ng-if="!player" class="md-theme-dark">
      <h1 class="md-toolbar-tools"><span>Idle Lands</span></h1>
    </md-toolbar>
    <md-content scroll-y flex ui-view layout="column" layout-fill class="md-content-padding"></md-content>
    <script src="./js/lib.js"></script>
    <script src="./js/index.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q || []).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', 'UA-56283183-1', 'auto');ga('send', 'pageview');</script>
  </body>
</html>


<script id="login-advlogin" type="text/ng-template">
  <div flex="25" layout="column" class="tab-text">
    <form>
      <md-text-float label="Identifier" ng-model="advLogin.identifier"></md-text-float>
      <md-text-float label="Password" ng-model="advLogin.password" type="password"></md-text-float>
      <md-checkbox ng-model="advLogin.remember" class="no-margin-left">Remember Me</md-checkbox>
      <md-button ng-disabled="isSubmitting" ng-click="doAdvancedLogin()" aria-label="Login button" class="md-raised md-primary"><span ng-if="!isSubmitting">Log In</span><span ng-if="isSubmitting">Logging in...</span></md-button>
    </form>
  </div>
  <div flex="50" offset="15" layout="column" layout-align="space-around center" class="tab-text box-text">
    <div>Welcome to Idle Lands!</div>
    <div class="text-center"><span>This area is for people who know their identifier and would like to log in from a different location. Identifiers are unique per location (ie, irc.esper.net#seiyria) so if you know your identifier, you can log in with a character created elsewhere!</span></div>
    <div class="text-center md-warn">
      <div ng-show="advLogin.remember">Note! This caches your credentials in localStorage, which is super insecure! Do not check this if this isn't your computer!</div>
    </div>
  </div>
</script>


<script id="login" type="text/ng-template">
  <md-content>
    <md-card layout="row" flex="50" offset="25" layout-align="center" id="login-tabs">
      <md-tabs md-selected="selectedIndex">
        <md-tab on-select="selectTab(0)" label="Login" ng-disabled="isSubmitting">
          <div layout="row" layout-fill="layout-fill" layout-align="left center" ng-include="'login-login'" class="tab"></div>
        </md-tab>
        <md-tab on-select="selectTab(1)" label="Register" ng-disabled="isSubmitting">
          <div layout="row" layout-fill="layout-fill" layout-align="left center" ng-include="'login-register'" class="tab"></div>
        </md-tab>
        <md-tab on-select="selectTab(2)" label="Advanced Login" ng-disabled="isSubmitting">
          <div layout="row" layout-fill="layout-fill" layout-align="left center" ng-include="'login-advlogin'" class="tab"></div>
        </md-tab>
      </md-tabs>
    </md-card>
  </md-content>
</script>


<script id="login-login" type="text/ng-template">
  <div flex="25" layout="column" class="tab-text">
    <form>
      <md-text-float label="Character Name" ng-model="login.name"></md-text-float>
      <md-text-float label="Password" ng-model="login.password" type="password"></md-text-float>
      <md-checkbox ng-model="login.remember" class="no-margin-left">Remember Me</md-checkbox>
      <md-button ng-disabled="isSubmitting" ng-click="doLogin()" aria-label="Login button" class="md-raised md-primary"><span ng-if="!isSubmitting">Log In</span><span ng-if="isSubmitting">Logging in...</span></md-button>
    </form>
  </div>
  <div flex="50" offset="15" layout="column" layout-align="space-around center" class="tab-text box-text">
    <div>Welcome to Idle Lands!</div>
    <div class="text-center"><span>If you've previously registered a character, log in here. Otherwise, head over to&nbsp;</span><a ng-click="selectTab(1)" class="inline-link">the Register tab</a><span>&nbsp;to make a new character!</span></div>
    <div class="text-center md-background">
      <div ng-show="login.remember">Note! This caches your credentials in localStorage, which is super insecure! Do not check this if this isn't your computer!</div>
    </div>
  </div>
</script>


<script id="login-register" type="text/ng-template">
  <div flex="25" layout="column" class="tab-text">
    <form>
      <md-text-float label="Character Name" ng-model="register.name"></md-text-float>
      <md-text-float label="Password" ng-model="register.password" type="password"></md-text-float>
      <md-checkbox ng-model="register.remember" class="no-margin-left">Remember Me</md-checkbox>
      <md-button ng-disabled="isSubmitting" ng-click="doRegister()" aria-label="Register button" class="md-raised md-primary"><span ng-if="!isSubmitting">Register</span><span ng-if="isSubmitting">Registering...</span></md-button>
    </form>
  </div>
  <div flex="50" offset="15" layout="column" layout-align="space-around center" class="tab-text box-text">
    <div>Welcome to Idle Lands!</div>
    <div class="text-center"><span>Register your character here! Just put in a name and a password, and you're ready to go!</span></div>
    <div class="text-center md-warn">
      <div ng-show="register.remember">Note! This caches your credentials in localStorage, which is super insecure! Do not check this if this isn't your computer!</div>
    </div>
  </div>
</script>


<script id="pet-equipment" type="text/ng-template">
  <md-list class="flex-scroll has-height">
    <md-item ng-repeat="item in petSoulEtc track by $index">
      <md-item-content ng-include="'pet-equipment-item'"></md-item-content>
    </md-item>
    <md-item ng-repeat="item in sortedPetEquipment track by $index">
      <md-item-content ng-include="'pet-equipment-item'"></md-item-content>
    </md-item>
  </md-list>
</script>
<script id="pet-equipment-item" type="text/ng-template">
  <div class="md-tile-left class-badge text-center align-left-list-item">
    <div class="{{itemUtilities.classToColor(item.itemClass)}}">{{item.type}}
      <md-tooltip>{{item.itemClass}}</md-tooltip>
    </div>
    <div ng-if="item.extraItemClass" class="{{itemUtilities.classToColor(item.extraItemClass)}}">{{item.extraText}}</div>
    <div ng-if="!item.hideButtons" class="text-center"><span ng-click="unequipItem(item)" class="hover-cursor fa fa-fw fa-exchange">
        <md-tooltip>Unequip</md-tooltip></span></div>
  </div>
  <div class="md-tile-content item-line">
    <div><span class="super-bold">{{item.enchantLevel ? '+'+item.enchantLevel+' ' : ''}} {{item.name}}</span><small ng-if="item.foundAt &amp;&amp; !item.hideButtons"><span>, found</span><span>&nbsp;</span><span am-time-ago="item.foundAt"></span><span>, with a Player Relativity of</span><span>&nbsp;{{petItemScore(item)}}%&nbsp;</span><span>and an Item Relativity of</span><span>&nbsp;{{itemItemScore(item)}}%</span></small></div>
    <div layout="row" class="top-margin-5 wrap-container"><span ng-repeat="stat in itemUtilities.equipmentStatArray" flex="8"><span class="fa fa-fw fa-lg {{stat.fa}}">
          <md-tooltip>{{stat.name}}</md-tooltip></span><span>&nbsp;</span><small class="{{valueToColor(item[stat.name])}}">{{item[stat.name]}}</small><small>&nbsp;/&nbsp;</small><small class="{{valueToColor(item[stat.name+'Percent'])}}">{{item[stat.name+'Percent']}}%</small></span></div>
    <div class="top-margin-5"><small>{{getExtraStats(item)}}</small></div>
  </div>
</script>


<script id="pet-inventory" type="text/ng-template">
  <md-list class="flex-scroll has-height">
    <md-item ng-repeat="item in petItems track by $index">
      <md-item-content>
        <div class="md-tile-left class-badge text-center align-left-list-item">
          <div class="{{itemUtilities.classToColor(item.itemClass)}}">{{item.type}}
            <md-tooltip>{{item.itemClass}}</md-tooltip>
          </div>
          <div ng-if="item.extraItemClass" class="{{itemUtilities.classToColor(item.extraItemClass)}}">{{item.extraText}}</div>
          <div class="text-center"><span ng-click="sellItem($index)" class="hover-cursor fa fa-fw icon-money">
              <md-tooltip>Sell</md-tooltip></span><span ng-click="equipItem(item, $index)" ng-class="{'text-red': !canEquipItem(item)}" class="hover-cursor fa fa-fw fa-exchange">
              <md-tooltip>Equip</md-tooltip></span><span ng-click="swapItem($index)" class="hover-cursor fa fa-fw fa-child">
              <md-tooltip>Take from pet</md-tooltip></span></div>
        </div>
        <div class="md-tile-content item-line">
          <div><span class="super-bold">{{item.enchantLevel ? '+'+item.enchantLevel+' ' : ''}} {{item.name}}</span><small ng-if="item.foundAt"><span>, found</span><span>&nbsp;</span><span am-time-ago="item.foundAt"></span><span>, with a Player Relativity of</span><span>&nbsp;{{petItemScore(item)}}%&nbsp;</span><span>and an Item Relativity of</span><span>&nbsp;{{itemItemScore(item)}}%</span></small></div>
          <div layout="row" class="top-margin-5 wrap-container"><span ng-repeat="stat in itemUtilities.equipmentStatArray" flex="8"><span class="fa fa-fw fa-lg {{stat.fa}}">
                <md-tooltip>{{stat.name}}</md-tooltip></span><span>&nbsp;</span><small class="{{valueToColor(item[stat.name])}}">{{item[stat.name]}}</small><small>&nbsp;/&nbsp;</small><small class="{{valueToColor(item[stat.name+'Percent'])}}">{{item[stat.name+'Percent']}}%</small></span></div>
          <div class="top-margin-5"><small>{{itemUtilities.getExtraStats(item)}}</small></div>
        </div>
      </md-item-content>
    </md-item>
  </md-list>
</script>


<script id="pet-overview" type="text/ng-template">
  <div layout="row" class="tab-containment is-flex auto-flex wrap-container">
    <div flex="30" layout="column">
      <md-card layout="column" class="inner-card">
        <md-toolbar class="md-theme-light-blue">
          <div class="md-toolbar-tools">
            <h3>Vitals</h3>
          </div>
        </md-toolbar>
        <md-content class="card-padding">
          <div ng-if="!pet"><span>No Pets Purchased</span></div>
          <div layout="row" ng-if="pet">
            <div flex="33" class="vital-stat"><span class="fa fa-fw fa-heart fa-lg text-red vertical-center">
                <md-tooltip>Max HP</md-tooltip></span><span>&nbsp;</span><small>{{pet.hp.maximum | number:0 }}</small></div>
            <div flex="33" class="vital-stat"><span class="fa fa-fw fa-magic fa-lg text-blue vertical-center">
                <md-tooltip>Max MP</md-tooltip></span><span>&nbsp;</span><small>{{pet.mp.maximum | number:0}}</small></div>
            <div flex="33" class="vital-stat"><span class="fa fa-fw fa-asterisk fa-lg text-yellow vertical-center">
                <md-tooltip>Special Stat</md-tooltip></span><span>&nbsp;</span><small>{{pet.special.name || 'None'}}</small></div>
          </div>
          <div layout="row" ng-if="pet">
            <div flex="25" class="vital-stat"><span class="fa fa-fw icon-money fa-lg text-gold vertical-center">
                <md-tooltip>Gold</md-tooltip></span><span>&nbsp;</span><small>{{pet.gold.__current | number:0}}</small></div>
          </div>
          <div layout="row" ng-if="pet" class="wrap-container">
            <div ng-repeat="stat in equipmentStatArray" flex="25" class="vital-stat"><span class="fa fa-fw fa-lg vertical-center {{stat.fa}}">
                <md-tooltip>{{stat.name}}</md-tooltip></span><span>&nbsp;</span><small class="{{valueToColor(pet._statCache[stat.name])}}">{{pet._statCache[stat.name] || 0 | number:0}}</small></div>
          </div>
        </md-content>
      </md-card>
      <md-card layout="column" class="inner-card">
        <md-toolbar class="md-theme-light-blue">
          <div class="md-toolbar-tools">
            <h3>Controls</h3>
          </div>
        </md-toolbar>
        <md-content class="card-padding">
          <div layout="column">
            <div class="vital-stat"><span class="fa fa-fw fa-dashboard"></span>
              <md-button ng-click="toPlayerView()" class="inline-button md-raised md-accent">Swap to Player View</md-button>
            </div>
            <div class="vital-stat"><span class="fa fa-fw fa-{{getSmartIcon('Sell')}}"></span>
              <md-button ng-click="toggleSmart('Sell')" class="inline-button md-primary">Smart Sell
                <md-tooltip>Low-quality items are sold first.</md-tooltip>
              </md-button>
            </div>
            <div class="vital-stat"><span class="fa fa-fw fa-{{getSmartIcon('Equip')}}"></span>
              <md-button ng-click="toggleSmart('Equip')" class="inline-button md-primary">Smart Equip
                <md-tooltip>High-quality gear is auto-equipped.</md-tooltip>
              </md-button>
            </div>
            <div class="vital-stat"><span class="fa fa-fw fa-{{getSmartIcon('Self')}}"></span>
              <md-button ng-click="toggleSmart('Self')" class="inline-button md-primary">Smart Self
                <md-tooltip>Pet upgrades itself.</md-tooltip>
              </md-button>
            </div>
            <div class="vital-stat"><span class="fa fa-fw icon-money"></span>
              <md-button ng-click="takePetGold()" class="inline-button md-primary">Take Pet Gold</md-button>
            </div>
            <div class="vital-stat"><span class="fa fa-fw fa-cutlery"></span>
              <md-button ng-click="feedPet()" class="inline-button md-primary">Feed Pet</md-button>
            </div>
            <div class="vital-stat"><span class="fa fa-fw fa-shield"></span>
              <select ng-model="pet.professionName" ng-options="val for val in availablePetClasses()" ng-change="changePetClass()"></select>
            </div>
          </div>
        </md-content>
      </md-card>
      <md-card layout="column" class="inner-card">
        <md-toolbar class="md-theme-light-blue">
          <div class="md-toolbar-tools">
            <h3>Miscellaneous</h3>
          </div>
        </md-toolbar>
        <md-content class="card-padding">
          <div ng-if="!pet"><span>No Pets Purchased</span></div>
          <div layout="column" ng-if="pet">
            <div><span class="fa fa-fw fa-clock-o"></span><span>&nbsp;{{pet.creator.name}} originally found this pet <span am-time-ago='pet.createdAt'></span>
                <md-tooltip>{{pet.createdAt | amDateFormat:'dddd, MMMM Do YYYY, h:mm:ss a'}}</md-tooltip></span></div>
            <div><span class="fa fa-fw fa-{{getTypeIcon(pet)}}"></span><span>&nbsp;{{pet._configCache.category}}</span></div>
            <div><span class="fa fa-fw fa-{{getGenderFor(pet)}}"></span><span>&nbsp;{{pet.gender}}</span></div>
            <div><span class="fa fa-fw fa-link"></span><span>&nbsp;Max Item Score: {{pet._baseStats.itemFindRange | number:0}}</span></div>
            <div ng-if="pet.nextItemFind"><span class="fa fa-fw fa-refresh"></span><span>&nbsp;Next item find <span am-time-ago='pet.nextItemFind'></span></span></div>
          </div>
        </md-content>
      </md-card>
    </div>
    <div flex="30" layout="column">
      <md-card layout="column" class="is-flex auto-flex inner-card">
        <md-toolbar ng-if="availablePets().length !== 0" class="md-theme-light-blue">
          <div class="md-toolbar-tools">
            <h3>Unpurchased Pets</h3>
          </div>
        </md-toolbar>
        <md-content style="flex-basis:60px;height:60px" layout="column" ng-if="availablePets().length !== 0" class="is-flex auto-flex card-padding">
          <div style="align-items:center" flex="100" ng-repeat="pet in availablePets()" layout="row" class="is-flex auto-flex adventure-log-item">
            <div flex="10" ng-class="{'text-green hover-cursor animated-hover': canBuyPet(pet), 'text-red': !canBuyPet(pet)}" class="vertical-center text-center faa-parent"><span ng-click="tryToBuyPet(pet)" class="fa fa-fw fa-lg icon-money faa-shake"></span></div>
            <div flex="90">Unlock {{pet.type}} - {{pet.cost | number:0}} gold</div>
          </div>
        </md-content>
        <md-toolbar ng-if="pets.length" class="md-theme-light-blue">
          <div class="md-toolbar-tools">
            <h3>Your Pets</h3>
          </div>
        </md-toolbar>
        <md-content style="flex-basis:60px;height:60px" layout="column" ng-if="pets.length" class="is-flex auto-flex">
          <div style="align-items:center" flex="100" ng-repeat="pet in getPetsInOrder()" layout="row" class="is-flex auto-flex adventure-log-item">
            <div flex="10" class="vertical-center text-center faa-parent animated-hover hover-cursor"><span ng-class="{'text-green': pet.isActive, 'text-gray': !pet.isActive}" ng-click="doPetSwap(pet.createdAt)" class="fa fa-fw fa-lg fa-certificate faa-spin"></span></div>
            <div flex="90">
              <div>{{pet.name}}, the {{pet.type}}</div>
              <div>Level {{pet.level.__current}} {{pet.professionName}}</div>
              <div>Inventory {{pet.inventory.length}}/{{pet._configCache.scale.inventory[pet.scaleLevel.inventory]}}</div>
            </div>
          </div>
        </md-content>
      </md-card>
    </div>
    <div flex="40" layout="column">
      <md-card layout="column" class="is-flex auto-flex inner-card">
        <md-toolbar class="md-theme-light-blue">
          <div class="md-toolbar-tools">
            <h3>Upgrade Levels</h3>
          </div>
        </md-toolbar>
        <md-content style="flex-basis:20px;height:20px" layout="column" class="is-flex auto-flex card-padding">
          <div ng-if="!pet">No Pets Purchased</div>
          <table ng-if="pet">
            <tr>
              <th>Stat</th>
              <th>Level</th>
              <th>Gift</th>
              <th></th>
            </tr>
            <tr ng-repeat="(stat, level) in pet.scaleLevel">
              <td>{{petUpgradeData[stat].stat}}</td>
              <td><span>{{pet.scaleLevel[stat]+1}}/{{pet._configCache.scale[stat].length}}</span></td>
              <td><span>{{petUpgradeData[stat].gift.split('%gift').join(formatGift(stat, pet._configCache.scale[stat][pet.scaleLevel[stat]]))}}</span></td>
              <td>
                <md-button ng-disabled="pet.scaleLevel[stat]+1 === pet._configCache.scale[stat].length" ng-click="upgradeStat(stat)" class="inline-button md-accent">Upgrade
                  <md-tooltip>Next Level Cost: {{pet._configCache.scaleCost[stat][pet.scaleLevel[stat]+1] | number:0}} gold</md-tooltip>
                </md-button>
              </td>
            </tr>
          </table>
        </md-content>
      </md-card>
    </div>
  </div>
</script>
<script id="buy-pet" type="text/ng-template">
  <md-dialog>
    <md-content>
      <md-subheader class="md-sticky-no-effect">
        <h2>Procure a New Pet: {{petType}}</h2>
      </md-subheader>
      <div layout="row">
        <div></div>
        <md-text-float label="Name" ng-model="newPet.name"></md-text-float>
        <md-text-float label="First Attribute" ng-model="newPet.attr1"></md-text-float>
        <md-text-float label="Second Attribute" ng-model="newPet.attr2"></md-text-float>
      </div>
    </md-content>
    <div layout="row" class="md-actions">
      <md-button ng-click="cancel()">Cancel</md-button>
      <md-button ng-click="purchase()" class="md-primary">Purchase</md-button>
    </div>
  </md-dialog>
</script>


<script id="pet" type="text/ng-template">
  <md-toolbar ng-if="pet" class="md-theme-light">
    <h1 class="md-toolbar-tools"><span>{{pet.name}}, the level {{pet.level.__current}} {{pet.type}} {{pet.professionName}} with {{pet.attrs[0]}} and {{pet.attrs[1]}}</span></h1>
  </md-toolbar>
  <md-progress-linear mode="determinate" ng-value="xpPercent" md-theme="green" ng-if="pet" class="player-xp"></md-progress-linear>
  <div id="pet-tabs" class="auto-flex md-whiteframe-z1 is-flex">
    <md-tabs md-selected="selectedIndex" layout="column" class="is-flex auto-flex">
      <md-tab ui-sref="pet.overview" label="{{pet ? 'Pet' : 'Buy a Pet'}}">
        <div ui-view="petoverview" class="tab"></div>
      </md-tab>
      <md-tab ui-sref="pet.equipment" label="Equipment" ng-if="pet">
        <div ui-view="petequipment" class="tab"></div>
      </md-tab>
      <md-tab ui-sref="pet.inventory" label="Inventory ({{pet.inventory.length}}/{{pet._configCache.scale.inventory[pet.scaleLevel.inventory]}})" ng-if="pet">
        <div ui-view="petinventory" class="tab"></div>
      </md-tab>
    </md-tabs>
  </div>
</script>


<script id="player-achievements" type="text/ng-template">
  <md-list layout="row" class="flex-scroll wrap-container has-height">
    <md-item ng-repeat="achievement in player.achievements" flex="25" class="md-whiteframe-z1">
      <md-item-content>
        <div class="md-tile-left text-center"><span class="fa-stack"><span ng-repeat="item in $parent.achievementTypeToIcon[achievement.type]" class="fa fa-stack-2x {{item}}"></span></span></div>
        <div class="md-tile-content">
          <h3>{{achievement.name}}</h3>
          <h4>{{achievement.desc}}</h4>
          <p>{{achievement.reward}}</p>
        </div>
      </md-item-content>
    </md-item>
  </md-list>
</script>


<script id="player-battle" type="text/ng-template">
  <div layout="row" class="tab-containment is-flex auto-flex wrap-container has-height">
    <div ng-if="!currentBattle" layout="column" style="align-items:center;justify-content:center" flex="100" class="text-center md-theme-yellow">
      <div>Nothing to see here. You have to select a battle from your Adventure Log to see it here.</div>
    </div>
    <div flex="30" layout="column" ng-if="currentBattle">
      <md-card layout="column" class="inner-card">
        <md-toolbar class="md-theme-light-blue">
          <div class="md-toolbar-tools">
            <h3>Teams ({{currentBattle.name}})</h3>
          </div>
        </md-toolbar>
        <md-content class="card-padding">
          <div layout="column">
            <div ng-repeat="team in currentBattle.teams">
              <h3>Team "{{team.name}}"</h3>
              <table>
                <tr ng-repeat="member in team.members">
                  <td>{{member.name}}</td>
                  <td>{{member.level}}</td>
                  <td>{{member.profession}}</td>
                </tr>
              </table>
            </div>
          </div>
        </md-content>
      </md-card>
    </div>
    <div flex="70" layout="column" ng-if="currentBattle">
      <md-card layout="column" class="is-flex auto-flex inner-card">
        <md-toolbar class="md-theme-light-blue">
          <div class="md-toolbar-tools">
            <h3>Combat Log ({{currentBattle.name}})</h3>
          </div>
        </md-toolbar>
        <md-content style="flex-basis:40px" layout="column" class="is-flex auto-flex">
          <div style="margin-top:40px;padding-left:10px;align-items:center" flex="100" ng-repeat="message in currentBattle.messages track by $index" layout="row" class="is-flex top-margin-5">
            <htmldiv content="filterMessage(message)"></htmldiv>
          </div>
        </md-content>
      </md-card>
    </div>
  </div>
</script>


<script id="player-collectibles" type="text/ng-template">
  <md-list layout="row" class="flex-scroll wrap-container has-height">
    <md-item ng-repeat="collectible in player.collectibles" flex="25" class="md-whiteframe-z1">
      <md-item-content>
        <div class="md-tile-content">
          <h3>{{collectible.name}}</h3>
          <h4>Found&nbsp;<span am-time-ago="collectible.foundAt"></span>&nbsp;in {{collectible.map}} ({{collectible.region}})</h4>
          <p>Rarity: {{collectible.rarity || 'basic'}}</p>
        </div>
      </md-item-content>
    </md-item>
  </md-list>
</script>


<script id="player-equipment" type="text/ng-template">
  <md-list class="flex-scroll has-height">
    <md-item ng-repeat="item in playerItems track by $index">
      <md-item-content>
        <div class="md-tile-left class-badge text-center align-left-list-item">
          <div class="{{itemUtilities.classToColor(item.itemClass)}}">{{item.type}}
            <md-tooltip>{{item.itemClass}}</md-tooltip>
          </div>
          <div ng-if="item.extraItemClass" class="{{itemUtilities.classToColor(item.extraItemClass)}}">{{item.extraText}}</div>
          <!--equipped-->
          <div ng-if="!item.extraItemClass &amp;&amp; !item.hideButtons &amp;&amp; item.type !== 'providence'" class="text-center"><span ng-click="invItem(item)" class="hover-cursor fa fa-fw fa-caret-square-o-down">
              <md-tooltip>Add to Inventory</md-tooltip></span></div>
          <!--in overflow-->
          <div ng-if="_.isNumber(item.overflowSlot)" class="text-center"><span ng-if="item.extraItemClass" ng-click="sellItem(item)" class="hover-cursor fa fa-fw icon-money text-red">
              <md-tooltip>Sell</md-tooltip></span><span ng-if="item.extraItemClass" ng-click="swapItem(item)" class="hover-cursor fa fa-fw fa-exchange">
              <md-tooltip>Swap</md-tooltip></span><span ng-if="item.extraItemClass" ng-click="sendToPet(item)" class="hover-cursor fa fa-fw fa-paw">
              <md-tooltip>Send to pet</md-tooltip></span></div>
          <!--in shop-->
          <div ng-if="_.isNumber(item.shopSlot)" class="text-center"><span ng-if="item.extraItemClass" ng-click="buyItem(item)" class="hover-cursor fa fa-fw icon-money text-green">
              <md-tooltip>Buy</md-tooltip></span></div>
        </div>
        <div class="md-tile-content item-line">
          <div><span class="super-bold">{{item.enchantLevel ? '+'+item.enchantLevel+' ' : ''}}</span><span class="super-bold">{{item.name}}</span><small ng-if="item.foundAt"><span>, found</span><span>&nbsp;</span><span am-time-ago="item.foundAt"></span><span>, with a Player Relativity of</span><span>&nbsp;{{playerItemScore(item)}}%&nbsp;</span><span>and an Item Relativity of</span><span>&nbsp;{{itemItemScore(item)}}%</span></small></div>
          <div layout="row" class="top-margin-5 wrap-container"><span ng-repeat="stat in itemUtilities.equipmentStatArray" flex="8"><span class="fa fa-fw fa-lg {{stat.fa}}">
                <md-tooltip>{{stat.name}}</md-tooltip></span><span>&nbsp;</span><small class="{{valueToColor(item[stat.name])}}">{{item[stat.name]}}</small><small>&nbsp;/&nbsp;</small><small class="{{valueToColor(item[stat.name+'Percent'])}}">{{item[stat.name+'Percent']}}%</small></span></div>
          <div class="top-margin-5"><small>{{itemUtilities.getExtraStats(item)}}</small></div>
        </div>
      </md-item-content>
    </md-item>
  </md-list>
</script>


<script id="player-map" type="text/ng-template">
  <div layout="row" class="tab-containment is-flex auto-flex wrap-container">
    <div>{{drawMap()}}</div>
    <div id="map"></div>
  </div>
</script>


<script id="player-options" type="text/ng-template">
  <div layout="row" class="tab-containment is-flex auto-flex wrap-container has-height">
    <div flex="25" layout="column">
      <md-card layout="column" class="inner-card">
        <md-toolbar class="md-theme-light-blue">
          <div class="md-toolbar-tools">
            <h3>Player Options</h3>
          </div>
        </md-toolbar>
        <md-content class="card-padding">
          <div class="vital-stat"><span class="fa fa-fw fa-sign-out fa-lg vertical-center"></span><span>&nbsp;</span><small><a ng-click="logout()" class="inline-link">Log Out</a></small></div>
          <div class="vital-stat"><span class="fa fa-fw fa-paper-plane fa-lg vertical-center"></span><span>&nbsp;</span><small><a ng-click="openSubmissionWindow()" class="inline-link">Submit New Content</a></small></div>
          <div ng-if="player.isContentModerator" class="vital-stat"><span class="fa fa-fw fa-bullhorn fa-lg vertical-center"></span><span>&nbsp;</span><small><a ng-click="openModerationWindow()" class="inline-link">Moderate Content ({{customContentList.length}} items)</a></small></div>
        </md-content>
      </md-card>
      <md-card layout="column" class="inner-card">
        <md-toolbar class="md-theme-light-blue">
          <div class="md-toolbar-tools">
            <h3><a href="https://github.com/IdleLands/IdleLands/wiki/PushBullet-Integration" target="_blank" class="fa fa-question-circle">&nbsp;PushBullet</a></h3>
          </div>
        </md-toolbar>
        <md-content class="card-padding"><a href="href" editable-text="player.pushbulletApiKey">{{player.pushbulletApiKey || 'No PushBullet API key set'}}</a></md-content>
      </md-card>
      <md-card layout="column" class="inner-card">
        <md-toolbar class="md-theme-light-blue">
          <div class="md-toolbar-tools">
            <h3><a href="https://github.com/IdleLands/IdleLands/wiki/Gender" target="_blank" class="fa fa-question-circle">&nbsp;Gender</a></h3>
          </div>
        </md-toolbar>
        <md-content class="card-padding"><a href="href" editable-text="player.gender">{{player.gender || 'No gender specified'}}</a>
          <md-radio-group ng-model="player.gender">
            <md-radio-button value="female">Female</md-radio-button>
            <md-radio-button value="male">Male</md-radio-button>
            <md-radio-button value="glowcloud">Glowcloud</md-radio-button>
            <md-radio-button value="not a bear">Bear</md-radio-button>
            <md-radio-button value="astroentity">Astronomical Entity</md-radio-button>
            <md-radio-button value="secret">A Secret to Everybody</md-radio-button>
          </md-radio-group>
        </md-content>
      </md-card>
    </div>
    <div flex="60" layout="column">
      <md-card layout="column" class="inner-card">
        <md-toolbar class="md-theme-light-blue">
          <div class="md-toolbar-tools">
            <h3><a href="https://github.com/IdleLands/IdleLands/wiki/Priority-Points" target="_blank" class="fa fa-question-circle">&nbsp;Priority Points</a></h3>
          </div>
        </md-toolbar>
        <md-content class="card-padding">
          <div layout="row" class="wrap-container">
            <md-text-float label="{{stat}}" type="number" ng-model="player.priorityPoints[stat]" flex="33" ng-repeat="(stat,val) in player.priorityPoints track by $index"></md-text-float>
          </div>
        </md-content>
      </md-card>
      <md-card layout="column" class="inner-card">
        <md-toolbar class="md-theme-light-blue">
          <div class="md-toolbar-tools">
            <h3><a href="https://github.com/IdleLands/IdleLands/wiki/Player-Strings" target="_blank" class="fa fa-question-circle">&nbsp;Custom Strings</a></h3>
          </div>
        </md-toolbar>
        <md-content class="card-padding">
          <table>
            <tr ng-repeat="key in strings.keys track by $index">
              <td width="15%"><span href="href" editable-text="strings.keys[$index]">{{strings.keys[$index] || 'Add new...'}}</span></td>
              <td width="65%"><span href="href" editable-text="strings.values[$index]" ng-if="strings.keys[$index]">{{strings.values[$index] || '(not set)'}}</span></td>
              <td width="10%" class="text-right"><span ng-if="strings.keys[$index]" ng-click="removeString(strings.keys[$index], $index)" class="fa fa-large fa-trash text-red hover-cursor"></span></td>
            </tr>
          </table>
        </md-content>
      </md-card>
    </div>
    <div flex="15" layout="column">
      <md-card layout="column" class="inner-card">
        <md-toolbar class="md-theme-light-blue">
          <div class="md-toolbar-tools">
            <h3>Scrollback.io</h3>
          </div>
        </md-toolbar>
        <md-content class="card-padding">
          <md-switch ng-model="options.scrollback" ng-true-value="'true'" ng-false-value="'false'">Use Chat</md-switch>
        </md-content>
      </md-card>
      <md-card layout="column" class="inner-card">
        <md-toolbar class="md-theme-light-blue">
          <div class="md-toolbar-tools">
            <h3>External Links</h3>
          </div>
        </md-toolbar>
        <md-content class="card-padding">
          <div>
            <div class="vital-stat"><span class="fa fa-fw fa-question fa-lg vertical-center"></span><span>&nbsp;</span><small><a target="_blank" href="https://github.com/IdleLands/IdleLands/wiki/New-Player-Guide#faq" class="inline-link">FAQ</a></small></div>
            <div class="vital-stat"><span class="fa fa-fw fa-bar-chart fa-lg vertical-center"></span><span>&nbsp;</span><small><a target="_blank" href="http://idle.land/s/analytics/{{player.name}}" class="inline-link">Your Analytics</a></small></div>
            <div class="vital-stat"><span class="fa fa-fw fa-reddit fa-lg vertical-center"></span><span>&nbsp;</span><small><a target="_blank" href="http://reddit.com/r/idle_lands" class="inline-link">/r/idle_lands</a></small></div>
            <div class="vital-stat"><span class="fa fa-fw fa-github fa-lg vertical-center"></span><span>&nbsp;</span><small><a target="_blank" href="https://github.com/IdleLands/IdleLands" class="inline-link">IdleLands @ GitHub</a></small></div>
            <div class="vital-stat"><span class="fa fa-fw fa-thumbs-up fa-lg vertical-center"></span><span>&nbsp;</span><small><a target="_blank" href="http://idle.land/s/thanks" class="inline-link">Special Thanks</a></small></div>
          </div>
        </md-content>
      </md-card>
    </div>
  </div>
</script>
<script id="moderate-content" type="text/ng-template">
  <md-dialog>
    <md-content>
      <md-subheader class="md-sticky-no-effect">
        <h2>Moderate Custom Content</h2>
      </md-subheader>
      <div layout="row" layout-align="space-around center" style="padding:15px">
        <md-button ng-click="toggleAll()" class="md-accent">Toggle All</md-button>
        <md-button ng-click="refreshData()" class="md-accent">Refresh</md-button>
        <md-button ng-click="reject()" class="md-warn">Reject</md-button>
        <md-button ng-click="approve()" class="md-primary">Approve</md-button>
      </div>
      <div layout="row">
        <table>
          <thead>
            <tr>
              <th></th>
              <th width="100px">Type</th>
              <th width="400px">Content</th>
              <th width="200px">Submitter</th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="item in customContentList">
              <td>
                <md-switch ng-model="item.currentlySelected" aria-label="Toggle Selection"></md-switch>
              </td>
              <td>{{item.type}}</td>
              <td>{{item.content}}</td>
              <td>{{item.submitterName}}, <span am-time-ago='item.submissionTime'></span></td>
            </tr>
          </tbody>
        </table>
      </div>
    </md-content>
    <div layout="row" class="md-actions">
      <md-button ng-click="cancel()" class="md-warn">Close</md-button>
    </div>
  </md-dialog>
</script>
<script id="submit-content" type="text/ng-template">
  <md-dialog>
    <md-content>
      <md-subheader class="md-sticky-no-effect">
        <h2>Submit New Custom Content</h2>
      </md-subheader>
      <div layout="row">
        <div></div>
        <select ng-model="data.type" ng-options="obj.type group by obj.folder for obj in types" style="margin:15px"></select>
        <md-text-float label="Name of Object" ng-model="data._name" ng-if="data.type.requiresName"></md-text-float>
        <md-text-float label="Custom Content" ng-model="data.content" class="extended-input"></md-text-float>
      </div>
    </md-content>
    <div layout="row" class="md-actions">
      <md-button target="_blank" href="https://github.com/IdleLands/IdleLands/wiki/Content-Crafting" class="md-accent">Help</md-button>
      <md-button target="_blank" href="https://github.com/IdleLands/IdleLands/tree/master/assets/data/{{data.type.folder}}/{{data.type.type}}.txt" class="md-accent">Show Example</md-button>
      <md-button ng-click="cancel()">Cancel</md-button>
      <md-button ng-click="submit()" class="md-primary">Submit</md-button>
    </div>
  </md-dialog>
</script>


<script id="player-overview" type="text/ng-template">
  <div layout="row" class="tab-containment is-flex auto-flex wrap-container">
    <div flex="25" layout="column">
      <md-card layout="column" class="inner-card">
        <md-toolbar class="md-theme-light-blue">
          <div class="md-toolbar-tools">
            <h3>Vitals</h3>
          </div>
        </md-toolbar>
        <md-content class="card-padding">
          <div layout="row">
            <div flex="33" class="vital-stat"><span class="fa fa-fw fa-heart fa-lg text-red vertical-center">
                <md-tooltip>Max HP</md-tooltip></span><span>&nbsp;</span><small>{{player.hp.maximum | number:0}}</small></div>
            <div flex="33" class="vital-stat"><span class="fa fa-fw fa-magic fa-lg text-blue vertical-center">
                <md-tooltip>Max MP</md-tooltip></span><span>&nbsp;</span><small>{{player.mp.maximum | number:0}}</small></div>
            <div flex="33" class="vital-stat"><span class="fa fa-fw fa-asterisk fa-lg text-yellow vertical-center">
                <md-tooltip>Special Stat</md-tooltip></span><span>&nbsp;</span><small>{{player.special.name || 'None'}}</small></div>
          </div>
          <div layout="row">
            <div flex="100" class="vital-stat"><span class="fa fa-fw icon-money fa-lg text-gold vertical-center">
                <md-tooltip>Gold</md-tooltip></span><span>&nbsp;</span><small>{{player.gold.__current | number:0}}</small></div>
          </div>
          <div layout="row" class="wrap-container">
            <div ng-repeat="stat in equipmentStatArray" flex="25" class="vital-stat"><span class="fa fa-fw fa-lg vertical-center {{stat.fa}}">
                <md-tooltip>{{stat.name}}</md-tooltip></span><span>&nbsp;</span><small class="{{valueToColor(player._statCache[stat.name])}}">{{player._statCache[stat.name] | number:0}}</small></div>
          </div>
        </md-content>
      </md-card>
      <md-card layout="column" class="inner-card">
        <md-toolbar class="md-theme-light-blue">
          <div class="md-toolbar-tools">
            <h3>Pet Information</h3>
          </div>
        </md-toolbar>
        <md-content class="card-padding">
          <div layout="column">
            <div class="vital-stat"><span class="fa fa-fw fa-dashboard"></span>
              <md-button ng-click="toPetView()" class="inline-button md-raised md-accent">Swap to Pet View</md-button>
            </div>
            <div class="vital-stat"><span class="fa fa-fw fa-paw"></span><span>&nbsp;{{boughtPets()}}/{{_.size(player.foundPets)}} Pets</span></div>
          </div>
        </md-content>
      </md-card>
      <md-card layout="column" class="inner-card">
        <md-toolbar class="md-theme-light-blue">
          <div class="md-toolbar-tools">
            <h3>Miscellaneous</h3>
          </div>
        </md-toolbar>
        <md-content class="card-padding">
          <div layout="column">
            <div class="vital-stat"><span class="fa fa-fw fa-institution"></span>
              <md-button ng-disabled="praying" ng-click="pray()" class="inline-button md-raised md-accent md-hue-2">{{prayText}}
                <md-tooltip>Praying raises Superstition by 1</md-tooltip>
              </md-button>
            </div>
            <div class="vital-stat"><span class="fa fa-fw fa-globe"></span><span>&nbsp;{{player.map}} ~ {{player.x}}, {{player.y}}</span></div>
            <div class="vital-stat"><span class="fa fa-fw fa-map-marker"></span><span>&nbsp;{{player.mapRegion}}</span></div>
            <div ng-if="player.shop" class="vital-stat"><span class="fa fa-fw icon-money faa-tada animated"></span><span>&nbsp;In shop: {{player.shop.region}}!</span></div>
            <div class="vital-stat"><span class="fa fa-fw fa-users"></span><span>&nbsp;{{player.partyName || 'No party'}}</span></div>
            <div class="vital-stat"><span class="fa fa-fw fa-sitemap"></span><span>&nbsp;{{player.guild || 'No guild'}}</span></div>
            <div><span class="fa fa-fw fa-clock-o"></span><span>&nbsp;Started&nbsp;</span><span am-time-ago="player.registrationDate">
                <md-tooltip>{{player.registrationDate | amDateFormat:'dddd, MMMM Do YYYY, h:mm:ss a'}}</md-tooltip></span></div>
          </div>
        </md-content>
      </md-card>
    </div>
    <div flex="55" layout="column">
      <md-card layout="column" class="is-flex auto-flex inner-card">
        <md-toolbar class="md-theme-light-blue">
          <div class="md-toolbar-tools">
            <h3>Adventure Log</h3>
          </div>
        </md-toolbar>
        <md-content style="flex-basis:80px;height:80px" layout="column" class="is-flex auto-flex">
          <div flex="100" ng-repeat="event in player.recentEvents | reverse" layout="row" class="is-flex auto-flex adventure-log-item">
            <div flex="10" class="fa-stack vertical-center"><span ng-repeat="item in $parent.eventTypeToIcon[event.type]" ng-click="clickOnEvent(event.extra)" ng-class="{'hover-cursor': event.extra.battleId}" class="fa fa-fw fa-stack-2x {{item}}"></span></div>
            <div flex="90"><small am-time-ago="event.createdAt"></small>
              <div>{{event.message}}</div>
            </div>
          </div>
        </md-content>
      </md-card>
    </div>
    <div flex="20" layout="column">
      <md-card layout="column" class="is-flex auto-flex inner-card">
        <md-toolbar class="md-theme-light-blue">
          <div class="md-toolbar-tools">
            <h3><a href="http://idlelands.github.io/IdleLands/#!/Player/Personalities" target="_blank" class="fa fa-question-circle">&nbsp;Your Personalities</a></h3>
          </div>
        </md-toolbar>
        <md-content style="flex-basis:50px;height:50px" layout="column" class="is-flex auto-flex">
          <div ng-repeat="personality in player.achievements | filter:{type:'personality'}" class="is-flex auto-flex adventure-log-item">
            <div flex="30">
              <md-switch ng-model="personalityToggle[personality._personality]" aria-label="{{personality._personality}}" class="personality-switch"></md-switch>
            </div>
            <div flex="70">
              <div style="margin-top:10px">{{personality._personality}}</div>
            </div>
          </div>
        </md-content>
      </md-card>
    </div>
  </div>
</script>


<script id="player" type="text/ng-template">
  <md-toolbar>
    <h1 class="md-toolbar-tools">
      <md-progress-circular mode="determinate" value="{{turnTimeValue}}" style="float:right" class="player-turn md-warn"></md-progress-circular><span>{{player.name}}, the level {{player.level.__current}} {{player.professionName}}</span>
    </h1>
  </md-toolbar>
  <md-progress-linear mode="determinate" ng-value="xpPercent" md-theme="green" class="player-xp"></md-progress-linear>
  <div id="player-tabs" class="auto-flex md-whiteframe-z1 is-flex">
    <md-tabs md-selected="selectedIndex" layout="column" class="is-flex auto-flex">
      <md-tab ui-sref="player.overview" label="Player">
        <div ui-view="overview" class="tab"></div>
      </md-tab>
      <md-tab ui-sref="player.map" label="Map">
        <div ui-view="map" class="tab"></div>
      </md-tab>
      <md-tab ui-sref="player.equipment" label="Equipment">
        <div ui-view="equipment" class="tab"></div>
      </md-tab>
      <md-tab ui-sref="player.battle" label="Battle">
        <div ui-view="battle" class="tab"></div>
      </md-tab>
      <md-tab ui-sref="player.collectibles" label="Collectibles ({{player.collectibles.length}})" ng-show="player.collectibles.length &gt; 0">
        <div ui-view="collectibles" class="tab"></div>
      </md-tab>
      <md-tab ui-sref="player.achievements" label="Achievements ({{player.achievements.length}})">
        <div ui-view="achievements" class="tab"></div>
      </md-tab>
      <md-tab ui-sref="player.statistics" label="Statistics">
        <div ui-view="statistics" class="tab"></div>
      </md-tab>
      <md-tab ui-sref="player.options" label="Options">
        <div ui-view="options" class="tab"></div>
      </md-tab>
    </md-tabs>
  </div>
</script><script>window.scrollback = {room:"idlelands",form:"canvas",theme:"dark",minimize:true};(function(d,s,h,e){e=d.createElement(s);e.async=0;e.src=(location.protocol === "https:" ? "https:" : "http:") + "//scrollback.io/client.min.js";d.getElementsByTagName(s)[0].parentNode.appendChild(e);}(document,"script"));</script>


<script id="player-statistics" type="text/ng-template">
  <div layout="row" class="flex-scroll has-height">
    <div flex="25">
      <md-card class="inner-card">
        <md-toolbar class="md-theme-light-blue">
          <div class="md-toolbar-tools">
            <h3>Calculated Statistics</h3>
          </div>
        </md-toolbar>
        <md-content class="card-padding">
          <statistics-tree root="player.statistics" stats="statisticsKeys['calculated']" family="'calculated'"></statistics-tree>
        </md-content>
      </md-card>
    </div>
    <div flex="25">
      <md-card class="inner-card">
        <md-toolbar class="md-theme-light-blue">
          <div class="md-toolbar-tools">
            <h3>Combat Statistics</h3>
          </div>
        </md-toolbar>
        <md-content class="card-padding">
          <statistics-tree root="player.statistics" stats="statisticsKeys['combat self']" family="'combat self'"></statistics-tree>
        </md-content>
      </md-card>
    </div>
    <div flex="25">
      <md-card ng-if="showPermStats" class="inner-card">
        <md-toolbar class="md-theme-light-blue">
          <div class="md-toolbar-tools">
            <h3>Special Statistics</h3>
          </div>
        </md-toolbar>
        <md-content class="card-padding">
          <statistics-tree root="player.permanentAchievements" stats="permanentStatisticsKeys" family="''"></statistics-tree>
        </md-content>
      </md-card>
      <md-card class="inner-card">
        <md-toolbar class="md-theme-light-blue">
          <div class="md-toolbar-tools">
            <h3>Event Statistics</h3>
          </div>
        </md-toolbar>
        <md-content class="card-padding">
          <statistics-tree root="player.statistics" stats="statisticsKeys['event']" family="'event'"></statistics-tree>
        </md-content>
      </md-card>
    </div>
    <div flex="25">
      <md-card class="inner-card">
        <md-toolbar class="md-theme-light-blue">
          <div class="md-toolbar-tools">
            <h3>Exploration Statistics</h3>
          </div>
        </md-toolbar>
        <md-content class="card-padding">
          <statistics-tree root="player.statistics" stats="statisticsKeys['explore']" family="'explore'"></statistics-tree>
        </md-content>
      </md-card>
      <md-card class="inner-card">
        <md-toolbar class="md-theme-light-blue">
          <div class="md-toolbar-tools">
            <h3>Player Statistics</h3>
          </div>
        </md-toolbar>
        <md-content class="card-padding">
          <statistics-tree root="player.statistics" stats="statisticsKeys['player']" family="'player'"></statistics-tree>
        </md-content>
      </md-card>
    </div>
  </div>
</script>
<script id="statistics-template" type="text/ng-template">
  <table>
    <tr ng-repeat="stat in orderedData">
      <td class="text-{{stat.alignment}}">{{stat.name}}</td>
      <td class="text-center">{{stat.value}}</td>
    </tr>
  </table>
</script>